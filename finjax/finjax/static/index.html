<!doctype html>
<html xmlns:ng="http://angularjs.org">
  <head>
    <title>My GnuCash Data</title>
    <meta charset="utf-8" />
    <style type="text/css">
      .money { text-align: right }
    </style>
  </head>
  <body>
    <h1>Finance Fun</h1>

    <p>Brought to you by...</p>
    <ul>
      <li><a href="http://docs.angularjs.org/">AngularJS</a> 0.9.12</li>
      <li><a href="http://pyramid.readthedocs.org/en/1.3-branch/index.html"
	     >Pyramid 1.3</a></li>
      <li><a href="http://docs.sqlalchemy.org/">SQLAlchemy</a> 0.7</li>
      <li><a href="http://gnucash.org/">GnuCash</a> 2.4.10</li>
    </ul>

    <div ng:controller="AccountsCtrl">
      <h2>Accounts</h2>

      <table>
	<tr><th>Account Name</th><th>Type</th></tr>
	<tr ng:repeat="account in
		       children(root).$filter({'hidden': false}).$orderBy('name')">
	  <td>{{account.name}}</td><td>{{account.account_type}}</td>
	</tr>
      </table>
    </div>

    <div ng:controller="TransactionsCtrl">
      <h2>Transactions</h2>
      <table>
	<thead>
	<tr><th>Date</th><th>Description / Memo</th>
	<th>Account</th>
	<th>Amount</th></tr>
	</thead>
	<tbody>
	  <form ng:submit="search(q)">
	    <tr>
	      <td> </td>
	      <td><input name="q"/></td>
	      <td> </td>
	      <td> </td>
	      <td><input type='submit' value='Search' /></td>
	    </tr>
	  </form>
	</tbody>

	<tbody ng:repeat="tx in matches">
	  <tr>
	    <td>{{tx.post_date}}</td>
	    <td>{{tx.description}}</td>
	  </tr>
	  <tr ng:repeat="d in tx.splits">
	    <td>&#160;</td>
	    <td>{{d.memo}}</td>
	    <td>{{d.account_name}}</td>
	    <td class="money">{{d.value_num / d.value_denom }}</td>
	  </tr>
	</tbody>

      </table>
    </div>

    <script src="http://code.angularjs.org/angular-0.9.12.js" ng:autobind></script>
    <script src="fin.js" type="text/javascript"></script>
  </body>
</html>
<!--
cribbed from
http://docs.angularjs.org/#!/misc/downloading
-->
